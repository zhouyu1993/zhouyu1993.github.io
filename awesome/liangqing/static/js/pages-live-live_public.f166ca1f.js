(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-live-live_public"],{"1a02":function(t,e,i){"use strict";var a=i("7e1a"),o=i.n(a);o.a},"664a":function(t,e,i){"use strict";i.r(e);var a=i("f05d"),o=i("74ac");for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);i("1a02");var n=i("f0c5"),r=Object(n["a"])(o["default"],a["a"],a["b"],!1,null,"27f1985c",null);e["default"]=r.exports},"74ac":function(t,e,i){"use strict";i.r(e);var a=i("9c9a"),o=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=o.a},"7e1a":function(t,e,i){var a=i("865e");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("6a3772ab",a,!0,{sourceMap:!1,shadowMode:!1})},"865e":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".content[data-v-27f1985c]{position:relative;z-index:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex:1;flex:1;width:%?751?%;background-color:#4e3d36;background-image:-webkit-linear-gradient(bottom left,#2e185b,#4e3d36);background-image:linear-gradient(to top right,#2e185b,#4e3d36)}.header-wrap[data-v-27f1985c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:%?100?%}.title[data-v-27f1985c]{width:%?200?%}.title-text[data-v-27f1985c]{font-size:%?30?%;color:#fff;lines:1;text-overflow:ellipsis}.goback[data-v-27f1985c]{-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?120?%;height:%?100?%}.goback-icon[data-v-27f1985c]{width:%?60?%;height:%?60?%}.member-wrap[data-v-27f1985c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?420?%}.member-list[data-v-27f1985c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;width:%?320?%}.member-avatar[data-v-27f1985c]{width:%?60?%;height:%?60?%;margin:0 %?10?% 0 0;border-radius:%?60?%;border-width:%?1?%;border-style:solid;border-color:#fff}.more[data-v-27f1985c]{-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?60?%;height:%?60?%;margin-left:%?20?%;background-color:rgba(0,0,0,.6);border-radius:%?60?%}.more-text[data-v-27f1985c]{font-size:%?20?%;color:#fff}.live-wrap[data-v-27f1985c]{position:relative;z-index:2;width:%?750?%;height:%?750?%}.upusher[data-v-27f1985c]{position:absolute;top:0;left:%?187.5?%;z-index:3;width:%?375?%;height:%?375?%}.uplay1[data-v-27f1985c]{position:absolute;top:%?375?%;left:%?375?%;z-index:3;width:%?375?%;height:%?375?%}.uplay2[data-v-27f1985c]{position:absolute;top:%?375?%;left:0;z-index:3;width:%?375?%;height:%?375?%}.uplay[data-v-27f1985c]{position:absolute;top:0;left:0;z-index:3;width:%?750?%;height:%?750?%}.live-mask[data-v-27f1985c]{position:absolute;top:0;left:0;z-index:4}.anchor[data-v-27f1985c]{position:absolute;top:0;left:%?187.5?%;z-index:3;width:%?375?%;height:%?375?%}.guest1[data-v-27f1985c]{position:absolute;top:%?375?%;left:%?375?%;z-index:3;width:%?375?%;height:%?375?%}.guest2[data-v-27f1985c]{position:absolute;top:%?375?%;left:0;z-index:3;width:%?375?%;height:%?375?%}.live-user-wrap[data-v-27f1985c]{position:absolute;bottom:0;left:0;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?375?%;padding:%?20?% %?10?%;background-color:rgba(0,0,0,.6);background-image:-webkit-linear-gradient(top,transparent,rgba(0,0,0,.6));background-image:linear-gradient(180deg,transparent,rgba(0,0,0,.6))}.live-user-info[data-v-27f1985c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-flex:1;-webkit-flex:1;flex:1}.live-user-avatar[data-v-27f1985c]{width:%?50?%;height:%?50?%;border-radius:50%;margin-right:%?10?%}.live-user-name[data-v-27f1985c]{width:%?200?%;font-size:%?24?%;color:#fff}.live-user-info2[data-v-27f1985c]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.live-user-info3[data-v-27f1985c]{font-size:%?24?%;color:#fff}.live-addFriend-btn[data-v-27f1985c]{-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?100?%;height:%?40?%;margin-left:%?10?%;background-color:#f8d855;border-radius:%?40?%}.live-addFriend-btn-text[data-v-27f1985c]{font-size:%?20?%;color:#000}.anchor-player[data-v-27f1985c]{background-color:#2f185b}.guest1-player[data-v-27f1985c]{background-color:#3f185b}.guest2-player[data-v-27f1985c]{background-color:#290f48}.player-poster[data-v-27f1985c]{position:absolute;left:0;right:0;top:0;bottom:0;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.player-poster-img[data-v-27f1985c]{width:%?100?%;height:%?100?%}.message-wrap[data-v-27f1985c]{-webkit-box-flex:1;-webkit-flex:1;flex:1;padding:%?10?% %?20?%}.message-list[data-v-27f1985c]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.message-item[data-v-27f1985c]{-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start;margin-bottom:%?10?%}.message-item-content[data-v-27f1985c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?510?%;padding:%?15?%;background-color:rgba(0,0,0,.5);border-radius:%?10?%}.message-avatar[data-v-27f1985c]{width:%?30?%;height:%?30?%;border-radius:50%}.message-name[data-v-27f1985c]{margin-left:%?10?%;font-size:%?24?%;line-height:%?36?%;color:#999}.message-content[data-v-27f1985c]{-webkit-box-flex:1;-webkit-flex:1;flex:1;margin-left:%?10?%;font-size:%?24?%;line-height:%?36?%;color:#fff;text-overflow:ellipsis}.message-content-sys[data-v-27f1985c]{color:#fc1cfc}.message-content-sys2[data-v-27f1985c]{color:#5da8e2}.float-wrap[data-v-27f1985c]{position:absolute;right:%?40?%;bottom:%?140?%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.application-btn[data-v-27f1985c]{width:%?142?%;height:%?58?%;border-radius:%?29?%;background-color:#f8d855;font-size:%?25?%;line-height:%?58?%;color:#000;text-align:center}.application-intro[data-v-27f1985c]{margin-top:%?10?%;font-size:%?23?%;color:#f8d855}.footer-wrap[data-v-27f1985c]{position:fixed;left:0;bottom:0;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?750?%;height:%?100?%;padding:0 %?20?%}.input-wrap[data-v-27f1985c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-flex:1;-webkit-flex:1;flex:1;margin-right:%?10?%}.input-message[data-v-27f1985c]{height:%?70?%;-webkit-box-flex:1;-webkit-flex:1;flex:1;padding:0 %?30?%;font-size:%?24?%;background-color:rgba(0,0,0,.6);border-radius:%?40?%;color:#ddd}.sendMsg-btn[data-v-27f1985c]{width:%?100?%;border-width:0;background-color:#ff76a8;margin-left:%?15?%}.menu-wrap[data-v-27f1985c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.menu-item[data-v-27f1985c]{-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?80?%;height:%?80?%;background-color:rgba(0,0,0,.5);border-radius:%?80?%;margin-left:%?5?%;margin-right:%?5?%;position:relative}.menu-icon[data-v-27f1985c]{width:%?40?%;height:%?40?%}.menu-count[data-v-27f1985c]{width:%?20?%;height:%?20?%;text-align:center;line-height:%?20?%;background-color:#ed4574;border-radius:%?20?%;font-size:%?10?%;color:#fff;position:absolute;right:%?10?%;top:%?10?%}.application-wrap[data-v-27f1985c]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background-color:rgba(0,0,0,.6);position:fixed;left:0;top:0}.application-title[data-v-27f1985c]{text-align:center;padding:%?20?%}.application-title-text[data-v-27f1985c]{font-size:%?30?%;color:#fff}.application-list[data-v-27f1985c]{width:%?600?%;height:%?800?%;padding:%?20?%;background-color:#fff;border-radius:%?20?%}.application-scroll[data-v-27f1985c]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;height:%?760?%}.user-item[data-v-27f1985c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?10?%}.user-avatar[data-v-27f1985c]{width:%?80?%;height:%?80?%;border-radius:%?80?%}.user-info[data-v-27f1985c]{-webkit-box-flex:1;-webkit-flex:1;flex:1;padding:%?10?%}.user-name[data-v-27f1985c]{font-size:%?28?%;color:#333;margin-bottom:%?10?%}.info[data-v-27f1985c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.sex-wrap[data-v-27f1985c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?70?%;line-height:%?24?%;border-radius:%?24?%}.sex1[data-v-27f1985c]{background-color:#83d7ff}.sex2[data-v-27f1985c]{background-color:#fe9ab7}.sex-icon[data-v-27f1985c]{width:%?16?%;height:%?16?%}.age[data-v-27f1985c]{font-size:%?16?%;color:#fff;margin-left:%?5?%}.vip-wrap[data-v-27f1985c]{-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-left:%?10?%}.vip-icon[data-v-27f1985c]{width:%?70?%;height:%?24?%}.close-wrap[data-v-27f1985c]{padding:%?30?%}.close-icon[data-v-27f1985c]{width:%?80?%;height:%?80?%}.gift-popup[data-v-27f1985c]{position:absolute;left:%?10?%;bottom:%?400?%;z-index:999;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?600?%;height:%?100?%;background-color:rgba(0,0,0,.2);background-image:-webkit-linear-gradient(left,rgba(0,0,0,.8),rgba(0,0,0,.2));background-image:linear-gradient(90deg,rgba(0,0,0,.8),rgba(0,0,0,.2));border-radius:%?100?%}.gift-popup-user[data-v-27f1985c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.gift-popup-user-avatar[data-v-27f1985c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?100?%;height:%?100?%;border-radius:%?100?%}.gift-popup-user-avatar-img[data-v-27f1985c]{width:%?90?%;height:%?90?%;border-radius:%?90?%}.gift-popup-user-info[data-v-27f1985c]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;width:%?200?%;margin-left:%?20?%;text-overflow:ellipsis;overflow:hidden}.gift-popup-user-fromName[data-v-27f1985c]{font-size:%?28?%;color:#fff}.gift-popup-user-toName[data-v-27f1985c]{font-size:%?24?%;color:#fff}.gift-popup-user-info-text[data-v-27f1985c]{font-size:%?24?%;color:#ff76a8;margin-right:%?5?%}.gift-popup-gift[data-v-27f1985c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.gift-popup-gift-name[data-v-27f1985c]{font-size:%?24?%;color:#ff76a8}.gift-popup-gift-img[data-v-27f1985c]{width:%?80?%;height:%?80?%;margin:0 %?10?%}.gift-popup-gift-count[data-v-27f1985c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.gift-popup-gift-count-info[data-v-27f1985c]{font-size:%?24?%;color:#ed4574;margin-right:%?10?%;font-weight:700}.gift-popup-gift-count-text[data-v-27f1985c]{font-size:%?48?%;color:#ed4574}",""])},"9c9a":function(t,e,i){"use strict";(function(t){var a=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("ac6a"),i("7514");var o=a(i("f499")),s=a(i("1b2e")),n=a(i("7386")),r={data:function(){return{msg:"",msg1:"",msg2:"",msg3:"",headerHeight:0,screenWidth:0,screenHeight:0,messageHeight:0,statusBarHeight:0,liveInfo:{},myInfo:{},application_rose:"20",userRose:"0",role:"audience",isJoinAnchor:!1,room:{roomID:"",roomInfo:"",mixedPlayURL:"",isCreator:!1,pushers:[],isDestory:!1,hasJoinAnchor:!1,roomStatusCode:0},anchor:{},guest1:{},guest2:{},anchor_addFriend:!1,guest1_addFriend:!1,guest2_addFriend:!1,applicationList:[],applicationCount:0,showApplicationList:!1,inviteList:[],showInviteList:!1,isGift:!1,giftData:{from:{id:"",name:"",avatar:""},to:{id:"",name:"",avatar:""},gift:{name:"",img:"",count:1}},messageList:[],message:"",scrollToView:"",bottom:0,timeOutEvent:null}},onLoad:function(e){var i=this;t.log("live_public onLoad",e);try{var a=uni.getStorageSync("user_info");a&&(this.myInfo=a)}catch(l){t.error("getStorageSync.user_info: ",l)}try{var r=uni.getSystemInfoSync();r&&(this.screenWidth=r.screenWidth+1,this.screenHeight=r.screenHeight+1,this.statusBarHeight=r.statusBarHeight,this.headerHeight=r.screenWidth/750*100,this.messageHeight=this.screenHeight-this.statusBarHeight-this.headerHeight-this.screenWidth-this.headerHeight-30)}catch(l){t.error("getSystemInfoSync",l)}try{this.liveInfo=JSON.parse(decodeURIComponent(e.live))}catch(l){t.error("JSON.parse-options.live-catch",l)}var c=this.liveInfo.room||{};this.room.roomID=c.id,this.room.roomInfo=c.name||"",this.role=this.liveInfo.character,this.isJoinAnchor="anchor"==this.role,uni.$on("live_public-page",function(e){if(t.log("live_public-page 监听",e),i.msg="live_public-page 监听","joinAnchor"==e.type){i.applicationCount++;for(var a=JSON.parse(e.data.payload.extension),r=!1,c=0;c<i.applicationList.length;c++)a.id==i.applicationList[c].id&&(r=!0);r||i.applicationList.push({id:a.id,name:a.name,avatar:a.avatar,sex:a.sex,age:a.age,isInroom:!1})}if("AgreeJoinAnchor"==e.type&&s.default.api.ajaxData({method:"V1.LoveJoinVideo",uid:i.myInfo.id,token:i.myInfo.token,rid:i.room.roomID},function(t){if(uni.showToast({title:t.msg,position:"bottom",icon:"none"}),t.status){i.getPushURL();var e={roomid:i.room.roomID,id:i.myInfo.id,name:i.myInfo.name,avatar:i.myInfo.avatar,sex:i.myInfo.sex,age:i.myInfo.age,city:i.myInfo.city};e=(0,o.default)(e),uni.$emit("main",{type:"sendCustomMessage",data:{type:"successJoinAnchor",to_uid:i.anchor.userID,custom_ext:e}})}else{var a={roomid:i.room.roomID,id:i.myInfo.id,name:i.myInfo.name,avatar:i.myInfo.avatar,sex:i.myInfo.sex,age:i.myInfo.age,city:i.myInfo.city};a=(0,o.default)(a),uni.$emit("main",{type:"sendCustomMessage",data:{type:"failJoinAnchor",to_uid:i.anchor.userID,custom_ext:a}})}}),"successJoinAnchor"==e.type){for(var u,f=-1,d=JSON.parse(e.data.payload.extension),m=0;m<i.applicationList.length;m++)d.id==i.applicationList[m].id&&(f=m,u=i.applicationList[m]);f>-1&&(u.isInroom=!0,i.$set(i.applicationList,f,u))}if("failJoinAnchor"==e.type){for(var g=-1,p=JSON.parse(e.data.payload.extension),h=0;h<i.applicationList.length;h++)p.id==i.applicationList[h].id&&(g=h);g>-1&&i.applicationList.splice(g,1)}if("KickedOut"==e.type){var v=JSON.parse(e.data.payload.extension);if(v.id!=i.myInfo.id){try{i.$refs.upusher.stopPusher(function(e){t.log("upusher.stopPusher",e)})}catch(l){t.error(l)}try{i.$refs.uplay1.stopPlay(function(e){t.log("uplay1.stopPlay",e)})}catch(l){t.error(l)}try{i.$refs.uplay2.stopPlay(function(e){t.log("uplay2.stopPlay",e)})}catch(l){t.error(l)}n.default.exitRoom({success:function(e){t.log("liveroom.exitRoom.success: ",e),uni.showToast({title:"您被主播请下了麦",position:"bottom",icon:"none"}),i.isJoinAnchor=!1,i.getAnchors()},fail:function(e){t.log("liveroom.exitRoom.fail: ",e),uni.navigateBack({delta:-1})}})}}if("live-system-message"==e.type){var b=JSON.parse(e.data.payload.extension);i.messageList.push({type:"sys2",avatar:b.fromAvatar,id:b.fromId,name:b.fromName,content:e.data.payload.description}),i.$nextTick(function(){i.scrollToView="message-item"+(i.messageList.length-1)}),uni.showToast({title:e.data.payload.description,position:"bottom",icon:"none"}),b.roomClosed&&setTimeout(function(){uni.navigateBack({delta:-1})},1e3)}if("live-update"==e.type&&(i.isJoinAnchor||setTimeout(function(){i.getAnchors()},2e3)),"message"==e.type&&"TIMTextElem"==e.data.type&&(i.messageList.push({type:"user",avatar:e.data.avatar,id:e.data.userID,name:e.data.nick,content:e.data.payload.text}),i.$nextTick(function(){i.scrollToView="message-item"+(i.messageList.length-1)})),"gift"==e.type){var w=JSON.parse(e.data.payload.extension);i.giftData={from:{id:w.fromId,name:w.fromName,avatar:w.fromAvatar},to:{id:w.toId,name:w.toName,avatar:w.toAvatar},gift:{name:w.giftName,img:w.url,count:w.count}},i.isGift=!0,setTimeout(function(){i.isGift=!1},5e3),w.toId==i.anchor.userID&&i.isFriendCheck("anchor"),w.toId==i.guest1.userID&&i.isFriendCheck("guest1"),w.toId==i.guest2.userID&&i.isFriendCheck("guest2")}})},onUnload:function(){t.log("live_public onUnload"),uni.$off("live_public-page")},onReady:function(){var e=this;t.log("live_public onReady"),uni.setKeepScreenOn({keepScreenOn:!0}),this.login(),n.default.setListener({onAnchorEnter:function(i){if(t.log("onAnchorEnter: ",i.pushers),t.log("this.room.pushers: ",e.room.pushers),e.msg1="onAnchorEnter: ","anchor"==e.role){var a=e.room.pushers.concat(i.pushers);e.room.pushers=a,e.anchor=a.find(function(t){return e.myInfo.id==t.userID})||{},a.filter(function(t){return e.myInfo.id!=t.userID}).forEach(function(i,a){var o=a+1;e["guest".concat(o)]=i,e.isFriendCheck("guest".concat(o)),e.getUserDetail("guest".concat(o));try{e.$refs["uplay".concat(o)].startPlay(i.accelerateURL,1,function(i){t.log("uplay".concat(o,".startPlay: "),i),e.msg2="uplay".concat(o,".startPlay: ")})}catch(s){t.error(s)}})}if("audience"==e.role)if(e.room.hasJoinAnchor){var s=e.room.pushers.concat(i.pushers);e.room.pushers=s,e.guest1=s.find(function(t){return e.myInfo.id==t.userID})||{},s.filter(function(t){return e.myInfo.id!=t.userID}).forEach(function(i,a){if(e.anchor.userID==i.userID){e.anchor=i,e.isFriendCheck("anchor"),e.getUserDetail("anchor");try{e.$refs.uplay1.startPlay(i.accelerateURL,1,function(i){t.log("uplay1.startPlay: ",i),e.msg2="uplay1.startPlay: "})}catch(o){t.error(o)}}else{e.guest2=i,e.isFriendCheck("guest2"),e.getUserDetail("guest2");try{e.$refs.uplay2.startPlay(i.accelerateURL,1,function(i){t.log("uplay2.startPlay: ",i),e.msg2="uplay2.startPlay: "})}catch(o){t.error(o)}}})}else{uni.showToast({title:"onAnchorEnter: 观众未上麦",position:"bottom",icon:"none"});var n=i.pushers;e.room.pushers=n,e.guest1=n.find(function(t){return e.myInfo.id==t.userID})||{},n.filter(function(t){return e.myInfo.id!=t.userID}).forEach(function(i,a){if(e.anchor.userID==i.userID){e.anchor=i,e.isFriendCheck("anchor"),e.getUserDetail("anchor");try{e.$refs.uplay1.startPlay(i.accelerateURL,1,function(i){t.log("uplay1.startPlay: ",i),e.msg2="uplay1.startPlay: "})}catch(o){t.error(o),e.msg2="uplay1.startPlay.catch: "}}else{e.guest2=i,e.isFriendCheck("guest2"),e.getUserDetail("guest2");try{e.$refs.uplay2.startPlay(i.accelerateURL,1,function(i){t.log("uplay2.startPlay: ",i),e.msg2="uplay2.startPlay: "})}catch(o){t.error(o),e.msg2="uplay2.startPlay.catch: "}}})}var r={fromId:e.myInfo.id,fromName:e.myInfo.name,fromAvatar:e.myInfo.avatar};r=(0,o.default)(r),uni.$emit("main",{type:"sendCustomMessage",data:{type:"live-update",groupID:"Y"+e.room.roomID,description:"更新直播间信息",custom_ext:r}})},onAnchorExit:function(i){t.log("onAnchorExit: ",i.pushers),t.log("this.room.pushers: ",e.room.pushers);for(var a=0;a<i.pushers.length;a++){for(var s=0;s<e.applicationList.length;s++)i.pushers[a].userID==e.applicationList[s].id&&e.applicationList.splice(s,1);for(var n=0;n<e.room.pushers.length;n++)if(i.pushers[a].userID==e.room.pushers[n].userID){if("anchor"==e.role){if(2==e.room.pushers.length){e.guest1.userID="",e.guest2.userID="";try{e.$refs.uplay1.stopPlay(function(e){t.log("uplay1.stopPlay",e)})}catch(c){t.error(c)}try{e.$refs.uplay2.stopPlay(function(e){t.log("uplay2.stopPlay",e)})}catch(c){t.error(c)}}if(3==e.room.pushers.length){if(1==n){e.guest1.userID="";try{e.$refs.uplay1.stopPlay(function(e){t.log("uplay1.stopPlay",e)})}catch(c){t.error(c)}}if(2==n){e.guest2.userID="";try{e.$refs.uplay2.stopPlay(function(e){t.log("uplay2.stopPlay",e)})}catch(c){t.error(c)}}}}if("audience"==e.role){e.guest2.userID="";try{e.$refs.uplay2.stopPlay(function(e){t.log("uplay2.stopPlay",e)})}catch(c){t.error(c)}}e.room.pushers.splice(n,1)}e.anchor.userID==i.pushers[a].userID?uni.showToast({title:"红娘已退出，直播间关闭",position:"bottom",icon:"none"}):uni.showToast({title:i.pushers[a].userName+" 离开直播间",position:"bottom",icon:"none"});var r={fromId:e.myInfo.id,fromName:e.myInfo.name,fromAvatar:e.myInfo.avatar};r=(0,o.default)(r),uni.$emit("main",{type:"sendCustomMessage",data:{type:"live-update",groupID:"Y"+e.room.roomID,description:"更新直播间信息",custom_ext:r}})}}}),this.messageList.push({type:"sys",content:"平台正对直播间内容进行24小时巡查，任何传播违法、违规、低俗、色情、暴力等不良信息将会被封停账号；请勿轻信他人，谨防上当受骗。"}),s.default.api.ajaxData({method:"V1.UserIndex",uid:this.myInfo.id,token:this.myInfo.token},function(t){if(t.status){var i=t.data||{},a=i.avatar,o=void 0===a?"":a,s=i.name,n=void 0===s?"":s,r=i.sex,c=void 0===r?"1":r,l=i.rose,u=void 0===l?"0":l;e.application_rose="1"==c?"20":"0",e.userRose=u,e.messageList.push({type:"sys2",avatar:o,id:e.myInfo.id,name:n,content:n+"进入相亲直播房间"})}else setTimeout(function(){uni.showToast({title:t.msg,position:"bottom",icon:"none"})},1e3),setTimeout(function(){uni.navigateBack({delta:-1})},2e3)})},onShow:function(){t.log("live_public onShow");var e=getApp().globalData.invite_list;if(e&&e.length>0)for(var i=0;i<e.length;i++)e[i].isInvite=!1,this.inviteList.push(e[i])},onHide:function(){t.log("live_public onHide")},onBackPress:function(t){return"navigateBack"!=t.from&&(this.goback(),!0)},methods:{goback:function(){var e=this;uni.showModal({title:"退出",content:"确认要退出直播间？",success:function(i){if(i.confirm){if(e.isJoinAnchor){try{e.$refs.upusher.stopPusher(function(e){t.log("upusher.stopPusher",e)})}catch(a){t.error(a)}try{e.$refs.uplay1.stopPlay(function(e){t.log("uplay1.stopPlay",e)})}catch(a){t.error(a)}try{e.$refs.uplay2.stopPlay(function(e){t.log("uplay2.stopPlay",e)})}catch(a){t.error(a)}}else try{e.$refs.uplay.stopPlay(function(e){t.log("uplay.stopPlay",e)})}catch(a){t.error(a)}e.exitRoom()}}})},exitRoom:function(){var t=this;n.default.exitRoom({success:function(e){"anchor"==t.role?(t.msg="liveroom.exitRoom.success: ",s.default.api.ajaxData({method:"V1.LoveClose",uid:t.myInfo.id,token:t.myInfo.token,rid:t.room.roomID},function(e){if(t.msg="V1.LoveClose: "+(0,o.default)(e),uni.showToast({title:e.msg,position:"bottom",icon:"none"}),e.status){var i={fromId:t.myInfo.id,fromName:t.myInfo.name,fromAvatar:t.myInfo.avatar,roomClosed:!0};i=(0,o.default)(i),uni.$emit("main",{type:"sendCustomMessage",data:{type:"live-system-message",groupID:"Y"+t.room.roomID,description:"红娘已退出，直播间关闭",custom_ext:i}}),setTimeout(function(){uni.navigateBack({delta:-1})},1e3)}},function(e){t.msg="V1.LoveClose: "+(0,o.default)(e)})):s.default.api.ajaxData({method:"V1.LoveExit",uid:t.myInfo.id,token:t.myInfo.token,rid:t.room.roomID,qid:"0"},function(t){uni.showToast({title:t.msg,position:"bottom",icon:"none"}),t.status&&uni.navigateBack({delta:-1})})},fail:function(t){uni.showToast({title:"退出直播间失败",position:"bottom",icon:"none"})}})},login:function(){var e=this;t.log("login"),n.default.login({data:{userID:this.myInfo.id,userName:this.myInfo.name,userAvatar:this.myInfo.avatar,userSig:this.myInfo.UserSig,sdkAppID:s.default.tencentSdkAppID},success:function(i){t.log("liveroom.login.success: ",i),"anchor"==e.role?e.createRoom():e.addAudience()},fail:function(e){t.error("liveroom.login.fail",e)}})},createRoom:function(){var e=this;t.log("createRoom"),n.default.createRoom({data:{roomID:this.room.roomID+"",roomInfo:this.room.roomInfo},success:function(i){t.log("liveroom.createRoom.success: ",i),e.room.isCreator=!0,e.getPushURL()},fail:function(e){t.error("liveroom.createRoom.fail: ",e)}})},getPushURL:function(){var e=this;if(!this.isJoinAnchor){if(3==this.room.pushers.length)return!1;try{this.$refs.uplay.stopPlay(function(e){t.log("uplay.stopPlay: ",e)})}catch(i){t.error(i)}this.isJoinAnchor=!0}n.default.getPushURL({success:function(a){t.log("liveroom.getPushURL.success: ",a),e.msg3="liveroom.getPushURL.success: ";var s=a.pushURL,n=setTimeout(function(){if(t.log("upusher.startPusher.timeout: "),e.msg2="upusher.startPusher.timeout: ","anchor"==e.role&&uni.showToast({title:"加载超时...退出并重新开启直播",position:"bottom",icon:"none"}),"audience"==e.role){e.isJoinAnchor=!1,e.getAnchors(),uni.showToast({title:"加载超时...退出并重新请求上麦",position:"bottom",icon:"none"});var i={roomid:e.room.roomID,id:e.myInfo.id,name:e.myInfo.name,avatar:e.myInfo.avatar,sex:e.myInfo.sex,age:e.myInfo.age,city:e.myInfo.city};i=(0,o.default)(i),uni.$emit("main",{type:"sendCustomMessage",data:{type:"failJoinAnchor",to_uid:e.anchor.userID,custom_ext:i}})}},5e3);try{t.log(e.$refs.upusher),e.$refs.upusher.startPusher(s,function(i){t.log("upusher.startPusher: ",i),0==i.code?(e.msg3="upusher.startPusher.success: ",clearTimeout(n),e.addAnchor(s)):e.msg3="upusher.startPusher.fail: "})}catch(i){t.error(i)}},fail:function(i){t.error("liveroom.getPushURL.fail: ",i),e.msg3="liveroom.getPushURL.fail: "}})},addAnchor:function(e){var i=this;t.log("addAnchor: ",this.room.roomID,e),n.default.joinAnchor({data:{roomID:this.room.roomID,pushURL:e,type:"private"},success:function(e){t.log("liveroom.joinAnchor.success: ",e);var a=e.data.pushers;i.msg3="liveroom.joinAnchor.success: ","anchor"==i.role&&(i.anchor=a.find(function(t){return i.myInfo.id==t.userID})||{},a.filter(function(t){return i.myInfo.id!=t.userID}).forEach(function(e,a){var o=a+1;i["guest".concat(o)]=e,i.isFriendCheck("guest".concat(o)),i.getUserDetail("guest".concat(o));try{i.$refs["uplay".concat(o)].startPlay(e.accelerateURL,1,function(e){t.log("uplay".concat(o,".startPlay: "),e),i["msg".concat(o)]="uplay".concat(o,".startPlay: ")})}catch(s){t.error(s)}})),"audience"==i.role&&(i.room.hasJoinAnchor=!0,i.guest1=a.find(function(t){return i.myInfo.id==t.userID})||{},a.filter(function(t){return i.myInfo.id!=t.userID}).forEach(function(e,a){if(i.anchor.userID==e.userID){i.anchor=e,i.isFriendCheck("anchor"),i.getUserDetail("anchor");try{i.$refs.uplay1.startPlay(e.accelerateURL,1,function(e){t.log("uplay1.startPlay: ",e),i.msg2="uplay1.startPlay: "})}catch(o){t.error(o)}}else{i.guest2=e,i.isFriendCheck("guest2"),i.getUserDetail("guest2");try{i.$refs.uplay2.startPlay(e.accelerateURL,1,function(e){t.log("uplay2.startPlay: ",e),i.msg2="uplay2.startPlay: "})}catch(o){t.error(o)}}}))},fail:function(e){t.error("liveroom.joinAnchor.fail: ",e),i.msg3="liveroom.joinAnchor.fail: "}})},addAudience:function(){var e=this;t.log("addAudience: ",this.room.roomID),n.default.enterRoom({data:{roomID:this.room.roomID},success:function(i){t.log("liveroom.enterRoom.success: ",i),e.msg3="liveroom.enterRoom.success: ";var a=i.data.pushers;e.room.pushers=a,a.forEach(function(t,i){0==i?(e.anchor=t,e.isFriendCheck("anchor"),e.getUserDetail("anchor")):(e["guest".concat(i)]=t,e.isFriendCheck("guest".concat(i)),e.getUserDetail("guest".concat(i)))});var n="http://loveplay.ekola.cn/live/"+s.default.tencentSdkAppID+"_r"+e.room.roomID+".flv";try{e.$refs.uplay.startPlay(n,0,function(e){t.log("uplay.startPlay",e)})}catch(c){t.error(c)}var r={fromId:e.myInfo.id,fromName:e.myInfo.name,fromAvatar:e.myInfo.avatar};r=(0,o.default)(r),uni.$emit("main",{type:"sendCustomMessage",data:{type:"live-system-message",groupID:"Y"+e.room.roomID,description:e.myInfo.name+"进入相亲直播房间",custom_ext:r}})},fail:function(i){t.error("liveroom.enterRoom.fail: ",i),uni.showModal({title:"",content:"红娘已退出，直播间关闭",showCancel:!1,success:function(t){t.confirm&&s.default.api.ajaxData({method:"V1.LoveExit",uid:e.myInfo.id,token:e.myInfo.token,rid:e.room.roomID,qid:"0"},function(t){t.status&&uni.navigateBack({delta:-1})})}})}})},getAnchors:function(){var e=this;n.default.getAnchors({data:{roomID:this.room.roomID},success:function(i){t.log("liveroom.getAnchors.success: ",i),e.msg2="liveroom.getAnchors.success: ",t.log("liveroom.enterRoom.success: ",i);var a=i.data.pushers;e.room.pushers=a,a.forEach(function(t,i){0==i?(e.anchor=t,e.isFriendCheck("anchor"),e.getUserDetail("anchor")):(e["guest".concat(i)]=t,e.isFriendCheck("guest".concat(i)),e.getUserDetail("guest".concat(i)))});var o="http://loveplay.ekola.cn/live/"+s.default.tencentSdkAppID+"_r"+e.room.roomID+".flv";try{e.$refs.uplay.startPlay(o,0,function(e){t.log("uplay.startPlay",e)})}catch(n){t.error(n)}},fail:function(i){t.error("liveroom.getAnchors.fail: ",i),e.msg2="liveroom.getAnchors.fail: "}})},loveJoinVideo:function(){if(2==+this.myInfo.sex||+this.userRose>=+this.application_rose){uni.showToast({title:"已申请！",position:"bottom",icon:"none"});var t={roomid:this.room.roomID,id:this.myInfo.id,name:this.myInfo.name,avatar:this.myInfo.avatar,sex:this.myInfo.sex,age:this.myInfo.age,city:this.myInfo.city};t=(0,o.default)(t),uni.$emit("main",{type:"sendCustomMessage",data:{type:"joinAnchor",to_uid:this.anchor.userID,custom_ext:t}})}else uni.showToast({title:"玫瑰不够啦快去充值吧",position:"bottom",icon:"none"})},openInviteList:function(){this.showInviteList=!this.showInviteList},openApplicationList:function(){this.applicationCount=0,this.showApplicationList=!this.showApplicationList},handle:function(t,e){var i=this;if(t.isInroom)s.default.api.ajaxData({method:"V1.LoveExit",uid:this.myInfo.id,token:this.myInfo.token,rid:this.room.roomID,qid:t.id},function(a){if(a.status){uni.showToast({title:"操作成功",position:"bottom",icon:"none"}),i.applicationList.splice(e,1);var s={roomid:i.room.roomID,id:i.myInfo.id,name:i.myInfo.name,avatar:i.myInfo.avatar,sex:i.myInfo.sex,age:i.myInfo.age,city:i.myInfo.city};s=(0,o.default)(s),uni.$emit("main",{type:"sendCustomMessage",data:{type:"KickedOut",to_uid:t.id,custom_ext:s}})}else uni.showToast({title:a.msg,position:"bottom",icon:"none"})});else{if(this.guest1.userID&&this.guest2.userID)return!1;uni.showToast({title:"已同意",position:"bottom",icon:"none"});var a=null;1==t.sex&&(a={id:this.guest2.userID?this.guest2.userID:"",name:this.guest2.userName?this.guest2.userName:"",avatar:this.guest2.userAvatar?this.guest2.userAvatar:"",age:this.guest2.age?this.guest2.age:""}),2==t.sex&&(a={id:this.guest1.userID?this.guest1.userID:"",name:this.guest1.userName?this.guest1.userName:"",avatar:this.guest1.userAvatar?this.guest1.userAvatar:"",age:this.guest1.age?this.guest1.age:""});var n={roomid:this.room.roomID,anchor:{id:this.anchor.userID,name:this.anchor.userName,avatar:this.anchor.userAvatar},guest:a};n=(0,o.default)(n),uni.$emit("main",{type:"sendCustomMessage",data:{type:"AgreeJoinAnchor",to_uid:t.id,custom_ext:n}})}},invite:function(t,e){var i=this.inviteList[e];i.isInvite=!0,this.$set(this.inviteList,e,i),uni.showToast({title:"邀请已发出，请耐心等待",position:"bottom",icon:"none"});var a={id:t.id,name:t.name,avator:t.avatar,age:t.age},s={roomid:this.room.roomID,anchor:{id:this.myInfo.id,name:this.myInfo.name,avatar:this.myInfo.avatar},guest:a,fromId:this.myInfo.id};s=(0,o.default)(s),uni.$emit("main",{type:"sendCustomMessage",data:{type:"LivePublic",to_uid:t.id,custom_ext:s}})},openGift:function(t){var e=this,i=null;if("anchor"==t){if(this.room.isCreator)return!1;i={id:this.anchor.userID,name:this.anchor.userName,avatar:this.anchor.userAvatar,isFriend:this.anchor.isFriend}}if("guest1"==t){if(!this.guest1.userID)return uni.showToast({title:"嘉宾未上麦",position:"bottom",icon:"none"}),!1;this.myInfo.id!=this.guest1.userID?i={id:this.guest1.userID,name:this.guest1.userName,avatar:this.guest1.userAvatar,isFriend:this.guest1.isFriend}:uni.showToast({title:"不能送自己礼物",position:"bottom",icon:"none"})}if("guest2"==t){if(!this.guest2.userID)return uni.showToast({title:"嘉宾未上麦",position:"bottom",icon:"none"}),!1;this.myInfo.id!=this.guest2.userID?i={id:this.guest2.userID,name:this.guest2.userName,avatar:this.guest2.userAvatar,isFriend:this.guest2.isFriend}:uni.showToast({title:"不能送自己礼物",position:"bottom",icon:"none"})}if(i){this.anchor.userID;this.myInfo.id==this.anchor.userID&&"0",s.default.api.ajaxData({method:"V1.Gift",uid:this.myInfo.id,token:this.myInfo.token},function(t){if(t.status){var a=uni.getSubNVueById("gift");a.show("slide-in-bottom",300,function(){uni.$emit("gift",{toInfo:i,userInfo:e.myInfo,list:t.data.list,rid:e.anchor.userID,minute:0,groupID:"Y"+e.room.roomID})})}})}},sendMsg:function(){var t=this;if(""==this.message)return uni.showToast({title:"消息不能为空",position:"bottom",icon:"none"}),!1;uni.$emit("main",{type:"sendTextMessage",data:{groupID:"Y"+this.room.roomID,to_id:"Y"+this.room.roomID,content:this.message}}),this.messageList.push({type:"user",avatar:this.myInfo.avatar,id:this.myInfo.id,name:this.myInfo.name,content:this.message}),this.message="",plus.key.hideSoftKeybord(),this.$nextTick(function(){t.scrollToView="message-item"+(t.messageList.length-1)})},isFriendCheck:function(t){var e=this,i="";return"anchor"==t&&(i=this.anchor.userID),"guest1"==t&&(i=this.guest1.userID?this.guest1.userID:""),"guest2"==t&&(i=this.guest2.userID?this.guest2.userID:""),""!=i&&(i!=this.myInfo.id&&void s.default.api.ajaxData({method:"V1.FriendCheck",uid:this.myInfo.id,token:this.myInfo.token,touid:i},function(i){i.status&&("CheckResult_Type_AWithB"==i.data[0].InfoItem[0].Relation||"CheckResult_Type_BothWay"==i.data[0].InfoItem[0].Relation?("anchor"==t&&(e.anchor_addFriend=!1,e.anchor.isFriend=1),"guest1"==t&&(e.guest1_addFriend=!1,e.guest1.isFriend=1),"guest2"==t&&(e.guest2_addFriend=!1,e.guest2.isFriend=1)):("anchor"==t&&(e.anchor_addFriend=!0,e.anchor.isFriend=0),"guest1"==t&&(e.guest1_addFriend=!0,e.guest1.isFriend=0),"guest2"==t&&(e.guest2_addFriend=!0,e.guest2.isFriend=0)))}))},getUserDetail:function(t){var e=this;this.msg1="getUserDetail: "+t;var i="";return"anchor"==t&&(i=this.anchor.userID),"guest1"==t&&(i=this.guest1.userID),"guest2"==t&&(i=this.guest2.userID),!!i&&(i!=this.myInfo.id&&void s.default.api.ajaxData({method:"V1.Detail",uid:this.myInfo.id,token:this.myInfo.token,touid:i,page:1},function(i){if(i.status){var a=i.data&&i.data.info||{},s=e[t];s.sex=a.sex,s.age=a.age,s.city=a.city,s.pname=a.pname,e[t]=s,e.msg1="V1.Detail"+(0,o.default)(s)}},function(t){e.msg1="V1.Detail"+(0,o.default)(t)}))},messageFocus:function(t){this.bottom=2*t.detail.height},messageBlur:function(t){this.bottom=0},longpress:function(t){t&&(this.message=this.message+"@".concat(t," "))},openUserDetails:function(t){var e={id:t.userID||t.id,name:t.userName||t.name};e.id&&t.name&&t.id!==this.myInfo.id&&uni.navigateTo({url:"../home/user_home?user="+(0,o.default)(e)})}},filters:{}};e.default=r}).call(this,i("5a52")["default"])},f05d:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"status-bar",style:{height:t.statusBarHeight+"px"}}),i("v-uni-view",{staticClass:"header-wrap"},[i("v-uni-view",{staticClass:"goback",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goback.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"goback-icon",attrs:{src:"/static/img/back.png",mode:""}})],1),i("v-uni-view",{staticClass:"title"},[i("v-uni-text",{staticClass:"title-text"},[t._v(t._s(t.room.roomInfo))])],1),i("v-uni-view",{staticClass:"member-wrap"},[i("v-uni-view",{staticClass:"member-list",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openInviteList.apply(void 0,arguments)}}},t._l(t.inviteList,function(t,e){return i("v-uni-image",{key:e,staticClass:"member-avatar",attrs:{src:t.avatar,mode:"aspectFill"}})}),1),i("v-uni-view",{staticClass:"more",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openInviteList.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"more-text"},[t._v("更多")])],1)],1)],1),i("v-uni-view",{staticClass:"live-wrap"},[t.isJoinAnchor?[i("upusher",{ref:"upusher",staticClass:"upusher",class:{uplay1:t.myInfo.id==t.guest1.userID,uplay2:t.myInfo.id==t.guest2.userID}}),i("uplay",{ref:"uplay1",staticClass:"uplay1",class:{upusher:t.myInfo.id==t.guest1.userID||t.myInfo.id==t.guest2.userID}}),i("uplay",{ref:"uplay2",staticClass:"uplay2",class:{uplay2:t.myInfo.id==t.guest1.userID,uplay1:t.myInfo.id==t.guest2.userID}})]:[i("uplay",{ref:"uplay",staticClass:"uplay"})],i("v-uni-view",{staticClass:"live-mask"},[i("v-uni-view",{staticClass:"anchor",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openGift("anchor")}}},[t.anchor.userID?i("v-uni-view",{staticClass:"live-user-wrap"},[i("v-uni-view",{staticClass:"live-user-info"},[i("v-uni-image",{staticClass:"live-user-avatar",attrs:{src:t.anchor.userAvatar,mode:"aspectFill"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openUserDetails(t.anchor)}}}),i("v-uni-text",{staticClass:"live-user-name"},[t._v(t._s(t.anchor.sex?1==t.anchor.sex?"月老":"红娘":"")+t._s(t.anchor.userName))])],1),t.anchor_addFriend?i("v-uni-view",{staticClass:"live-addFriend-btn"},[i("v-uni-text",{staticClass:"live-addFriend-btn-text"},[t._v("加好友")])],1):t._e()],1):i("v-uni-view",{staticClass:"anchor-player player-poster"},[i("v-uni-image",{staticClass:"player-poster-img",attrs:{src:"/static/img/shafa.png",mode:""}})],1)],1),i("v-uni-view",{staticClass:"guest1",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openGift("guest1")}}},[t.guest1.userID?i("v-uni-view",{staticClass:"live-user-wrap"},[i("v-uni-view",{staticClass:"live-user-info"},[i("v-uni-image",{staticClass:"live-user-avatar",attrs:{src:t.guest1.userAvatar,mode:"aspectFill"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openUserDetails(t.guest1)}}}),i("v-uni-view",{staticClass:"live-user-info2"},[i("v-uni-text",{staticClass:"live-user-name"},[t._v(t._s(t.guest1.userName))]),t.guest1.sex?i("v-uni-text",{staticClass:"live-user-info3"},[t._v(t._s(t.guest1.age)+"岁 | "+t._s("0"==t.guest1.city?t.guest1.pname:t.guest1.city))]):t._e()],1)],1),t.guest1_addFriend?i("v-uni-view",{staticClass:"live-addFriend-btn"},[i("v-uni-text",{staticClass:"live-addFriend-btn-text"},[t._v("加好友")])],1):t._e()],1):i("v-uni-view",{staticClass:"guest1-player player-poster"},[i("v-uni-image",{staticClass:"player-poster-img",attrs:{src:"/static/img/shafa.png",mode:""}})],1)],1),i("v-uni-view",{staticClass:"guest2",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openGift("guest2")}}},[t.guest2.userID?i("v-uni-view",{staticClass:"live-user-wrap"},[i("v-uni-view",{staticClass:"live-user-info"},[i("v-uni-image",{staticClass:"live-user-avatar",attrs:{src:t.guest2.userAvatar,mode:"aspectFill"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openUserDetails(t.guest2)}}}),i("v-uni-view",{staticClass:"live-user-info2"},[i("v-uni-text",{staticClass:"live-user-name"},[t._v(t._s(t.guest2.userName))]),t.guest2.sex?i("v-uni-text",{staticClass:"live-user-info3"},[t._v(t._s(t.guest2.age)+"岁 | "+t._s("0"==t.guest2.city?t.guest2.pname:t.guest2.city))]):t._e()],1)],1),t.guest2_addFriend?i("v-uni-view",{staticClass:"live-addFriend-btn"},[i("v-uni-text",{staticClass:"live-addFriend-btn-text"},[t._v("加好友")])],1):t._e()],1):i("v-uni-view",{staticClass:"guest2-player player-poster"},[i("v-uni-image",{staticClass:"player-poster-img",attrs:{src:"/static/img/shafa.png",mode:""}})],1)],1)],1)],2),i("v-uni-view",{staticClass:"message-wrap"},[i("v-uni-scroll-view",{staticClass:"message-list",style:{height:t.messageHeight+"px"},attrs:{"scroll-y":!0,"show-scrollbar":!1,"scroll-into-view":t.scrollToView}},t._l(t.messageList,function(e,a){return i("v-uni-view",{key:a,staticClass:"message-item",attrs:{id:"message-item"+a}},[i("v-uni-view",{class:["message-item-content","message-item-"+e.type]},[e.avatar?i("v-uni-image",{staticClass:"message-avatar",attrs:{src:e.avatar},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.openUserDetails(e)}}}):t._e(),"user"==e.type?i("v-uni-text",{staticClass:"message-name",on:{longpress:function(i){arguments[0]=i=t.$handleEvent(i),t.longpress(e.name)}}},[t._v(t._s(e.name)+":")]):t._e(),i("v-uni-text",{class:["message-content","message-content-"+e.type],on:{longpress:function(i){arguments[0]=i=t.$handleEvent(i),t.longpress(e.name)}}},[t._v(t._s(e.content))])],1)],1)}),1)],1),t.isJoinAnchor?t._e():i("v-uni-view",{staticClass:"float-wrap"},[i("v-uni-text",{staticClass:"application-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loveJoinVideo.apply(void 0,arguments)}}},[t._v("申请相亲")]),i("v-uni-text",{staticClass:"application-intro"},[t._v("上麦"+t._s(t.application_rose)+"玫瑰")])],1),i("v-uni-view",{staticClass:"footer-wrap",style:{bottom:t.bottom+"rpx"}},[i("v-uni-view",{staticClass:"input-wrap"},[i("v-uni-input",{staticClass:"input-message",attrs:{type:"text",placeholder:"想说点什么..."},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),i("v-uni-button",{staticClass:"sendMsg-btn",attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendMsg.apply(void 0,arguments)}}},[t._v("发送")])],1),i("v-uni-view",{staticClass:"menu-wrap"},["anchor"==t.role?i("v-uni-view",{staticClass:"menu-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openApplicationList.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"menu-icon",attrs:{src:"/static/img/application_icon.png",mode:""}}),t.applicationCount>0?i("v-uni-text",{staticClass:"menu-count"},[t._v(t._s(t.applicationCount))]):t._e()],1):t._e(),"audience"==t.role?i("v-uni-view",{staticClass:"menu-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openGift("anchor")}}},[i("v-uni-image",{staticClass:"menu-icon",attrs:{src:"/static/img/gift_icon.png",mode:""}})],1):t._e()],1)],1),t.showApplicationList?i("v-uni-view",{staticClass:"application-wrap",style:{width:t.screenWidth+"px",height:t.screenHeight+"px"}},[i("v-uni-view",{staticClass:"application-title"},[i("v-uni-text",{staticClass:"application-title-text"},[t._v("申请列表")])],1),i("v-uni-view",{staticClass:"application-list"},[i("v-uni-scroll-view",{staticClass:"application-scroll",attrs:{"scroll-y":!0,"show-scrollbar":!1}},t._l(t.applicationList,function(e,a){return i("v-uni-view",{key:a,staticClass:"user-item"},[i("v-uni-image",{staticClass:"user-avatar",attrs:{src:e.avatar,mode:"aspectFill"}}),i("v-uni-view",{staticClass:"user-info"},[i("v-uni-view",{staticClass:"name"},[i("v-uni-text",{staticClass:"user-name"},[t._v(t._s(e.name))])],1),i("v-uni-view",{staticClass:"info"},[i("v-uni-view",{class:["sex-wrap","sex"+e.sex]},[i("v-uni-image",{staticClass:"sex-icon",attrs:{src:"/static/img/sex"+e.sex+".png",mode:""}}),i("v-uni-text",{staticClass:"age"},[t._v(t._s(e.age))])],1),"1"==e.vip?i("v-uni-view",{staticClass:"vip-wrap"},[i("v-uni-image",{staticClass:"vip-icon",attrs:{src:"/static/img/vip.png",mode:""}})],1):t._e()],1)],1),i("v-uni-view",{staticClass:"handle-wrap"},[i("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handle(e,a)}}},[t._v(t._s(e.isInroom?"下麦":"同意"))])],1)],1)}),1)],1),i("v-uni-view",{staticClass:"close-wrap",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openApplicationList.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"close-icon",attrs:{src:"/static/img/close_icon.png",mode:""}})],1)],1):t._e(),t.showInviteList?i("v-uni-view",{staticClass:"application-wrap",style:{width:t.screenWidth+"px",height:t.screenHeight+"px"}},[i("v-uni-view",{staticClass:"application-title"},[i("v-uni-text",{staticClass:"application-title-text"},[t._v("邀请列表")])],1),i("v-uni-view",{staticClass:"application-list"},[i("v-uni-scroll-view",{staticClass:"application-scroll",attrs:{"scroll-y":!0,"show-scrollbar":!1}},t._l(t.inviteList,function(e,a){return i("v-uni-view",{key:a,staticClass:"user-item"},[i("v-uni-image",{staticClass:"user-avatar",attrs:{src:e.avatar,mode:"aspectFill"}}),i("v-uni-view",{staticClass:"user-info"},[i("v-uni-view",{staticClass:"name"},[i("v-uni-text",{staticClass:"user-name"},[t._v(t._s(e.name))])],1),i("v-uni-view",{staticClass:"info"},[i("v-uni-view",{class:["sex-wrap","sex"+e.sex]},[i("v-uni-image",{staticClass:"sex-icon",attrs:{src:"/static/img/sex"+e.sex+".png",mode:""}}),i("v-uni-text",{staticClass:"age"},[t._v(t._s(e.age))])],1),"1"==e.vip?i("v-uni-view",{staticClass:"vip-wrap"},[i("v-uni-image",{staticClass:"vip-icon",attrs:{src:"/static/img/vip.png",mode:""}})],1):t._e()],1)],1),i("v-uni-view",{staticClass:"handle-wrap"},[i("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.invite(e,a)}}},[t._v("邀请")])],1)],1)}),1)],1),i("v-uni-view",{staticClass:"close-wrap",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openInviteList.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"close-icon",attrs:{src:"/static/img/close_icon.png",mode:""}})],1)],1):t._e(),t.isGift?i("v-uni-view",{staticClass:"gift-popup"},[i("v-uni-view",{staticClass:"gift-popup-user"},[i("v-uni-view",{staticClass:"gift-popup-user-avatar"},[i("v-uni-image",{staticClass:"gift-popup-user-avatar-img",attrs:{src:t.giftData.from.avatar,mode:"aspectFill"}})],1),i("v-uni-view",{staticClass:"gift-popup-user-info"},[i("v-uni-view",{staticClass:"gift-popup-user-info-item"},[i("v-uni-text",{staticClass:"gift-popup-user-fromName"},[t._v(t._s(t.giftData.from.name))])],1),i("v-uni-text",{staticClass:"gift-popup-user-info-text"},[t._v("送")]),i("v-uni-view",{staticClass:"gift-popup-user-info-item"},[i("v-uni-text",{staticClass:"gift-popup-user-toName"},[t._v(t._s(t.giftData.to.name))])],1)],1)],1),i("v-uni-view",{staticClass:"gift-popup-gift"},[i("v-uni-text",{staticClass:"gift-popup-gift-name"},[t._v(t._s(t.giftData.gift.name))]),i("v-uni-image",{staticClass:"gift-popup-gift-img",attrs:{src:t.giftData.gift.img,mode:""}}),i("v-uni-view",{staticClass:"gift-popup-gift-count"},[i("v-uni-text",{staticClass:"gift-popup-gift-count-info"},[t._v("x")]),i("v-uni-text",{staticClass:"gift-popup-gift-count-text"},[t._v(t._s(t.giftData.gift.count))])],1)],1)],1):t._e()],1)},o=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return o})}}]);