(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-auth_video"],{"0b34":function(n,e,i){e=n.exports=i("2350")(!1),e.push([n.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-9ca8ec9a]{background:#f5f5f5}.tips[data-v-9ca8ec9a]{font-size:%?28?%;color:#333;text-align:center;margin:%?50?%}.cover-wrap[data-v-9ca8ec9a]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;position:relative}.cover-wrap .cover-image[data-v-9ca8ec9a]{width:%?360?%;height:%?360?%;border-radius:%?10?%}.cover-wrap .player-icon[data-v-9ca8ec9a]{width:%?40?%;height:%?40?%;position:absolute;left:50%;top:50%;margin-left:%?-20?%;margin-right:%?-20?%}.progress-box[data-v-9ca8ec9a]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-top:%?50?%}.progress-box .progress[data-v-9ca8ec9a]{width:%?360?%}.progress-box uni-text[data-v-9ca8ec9a]{margin-left:%?10?%;font-size:%?20?%}.btn-wrap[data-v-9ca8ec9a]{margin:%?50?%;padding:0 %?50?%}.btn-wrap uni-button[data-v-9ca8ec9a]{border-radius:%?100?%}.btn-wrap uni-button+uni-button[data-v-9ca8ec9a]{margin-top:%?20?%}.btn-wrap uni-button.camera[data-v-9ca8ec9a]{border:%?1?% solid #ff76a8;color:#ff76a8}body.?%PAGE?%[data-v-9ca8ec9a]{background:#f5f5f5}',""])},2256:function(n,e,i){"use strict";(function(n){var t=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t(i("f499"));i("28a5");var a=t(i("9f05")),u={data:function(){return{userInfo:{},form:{file:""},coverImage:"/static/img/auth.png",qiniuToken:"",domain:"",progress:0,progress_text:"正在上传..."}},onLoad:function(n){this.userInfo=JSON.parse(n.userinfo)},onReady:function(){uni.hideTabBar(),this.getQiniuToken()},onNavigationBarButtonTap:function(n){if(""==this.form.file)return uni.showToast({title:"请上传视频",position:"bottom",icon:"none"}),!1;uni.showLoading({title:""}),this.$api.api.ajaxData({method:"V1.UserAuth",uid:this.userInfo.id,token:this.userInfo.token,type:"2",file:this.form.file},function(n){uni.hideLoading(),uni.showToast({title:n.msg,position:"bottom",icon:"none"}),n.status&&(uni.$emit("my-page",{type:"update"}),setTimeout(function(){uni.navigateBack({delta:1})},1e3))},function(n){uni.hideLoading(),uni.showToast({title:"系统异常",position:"bottom",icon:"none"})})},methods:{getQiniuToken:function(){var n=this;this.$api.api.ajaxData({method:"V1.QiniuToken",uid:this.userInfo.id,token:this.userInfo.token},function(e){e.status&&(n.qiniuToken=e.data.token,n.domain=e.data.domain)})},upload:function(e){var i=this;uni.chooseVideo({count:1,sourceType:[e],success:function(e){var t=e.tempFilePath.split("/");a.default.upload(e.tempFilePath,function(n){i.progress_text="上传完毕.",i.coverImage=n.fileUrl+"?vframe/jpg/offset/1",i.form.file=n.key},function(e){n.log("err: "+(0,o.default)(e))},{region:"SCN",domain:i.domain,key:t[t.length-1],uptoken:i.qiniuToken},function(n){i.progress=n.progress},function(){},function(){},function(){})}})},previewVideo:function(){}}};e.default=u}).call(this,i("5a52")["default"])},4945:function(n,e,i){"use strict";i.r(e);var t=i("f84c"),o=i("4aa5");for(var a in o)"default"!==a&&function(n){i.d(e,n,function(){return o[n]})}(a);i("4b06");var u=i("f0c5"),r=Object(u["a"])(o["default"],t["a"],t["b"],!1,null,"9ca8ec9a",null);e["default"]=r.exports},"4aa5":function(n,e,i){"use strict";i.r(e);var t=i("2256"),o=i.n(t);for(var a in t)"default"!==a&&function(n){i.d(e,n,function(){return t[n]})}(a);e["default"]=o.a},"4b06":function(n,e,i){"use strict";var t=i("f132"),o=i.n(t);o.a},"9f05":function(n,e,i){"use strict";(function(e){i("28a5"),function(){var i={qiniuRegion:"",qiniuImageURLPrefix:"",qiniuUploadToken:"",qiniuUploadTokenURL:"",qiniuUploadTokenFunction:null,qiniuShouldUseQiniuFileName:!1};function t(n){i={qiniuRegion:"",qiniuImageURLPrefix:"",qiniuUploadToken:"",qiniuUploadTokenURL:"",qiniuUploadTokenFunction:null,qiniuShouldUseQiniuFileName:!1},o(n)}function o(n){n.region?i.qiniuRegion=n.region:e.error("qiniu uploader need your bucket region"),n.uptoken?i.qiniuUploadToken=n.uptoken:n.uptokenURL?i.qiniuUploadTokenURL=n.uptokenURL:n.uptokenFunc&&(i.qiniuUploadTokenFunction=n.uptokenFunc),n.domain&&(i.qiniuImageURLPrefix=n.domain),i.qiniuShouldUseQiniuFileName=n.shouldUseQiniuFileName}function a(n,t,a,s,c,l,p,f){if(null!=n)if(s&&o(s),i.qiniuUploadToken)u(n,t,a,s,c,l,p,f);else if(i.qiniuUploadTokenURL)r(function(){u(n,t,a,s,c,l,p,f)});else{if(!i.qiniuUploadTokenFunction)return void e.error("qiniu uploader need one of [uptoken, uptokenURL, uptokenFunc]");if(i.qiniuUploadToken=i.qiniuUploadTokenFunction(),null==i.qiniuUploadToken&&i.qiniuUploadToken.length>0)return void e.error("qiniu UploadTokenFunction result is null, please check the return value");u(n,t,a,s,c,l,p,f)}else e.error("qiniu uploader need filePath to upload")}function u(n,t,o,a,u,r,c,l){if(null==i.qiniuUploadToken&&i.qiniuUploadToken.length>0)e.error("qiniu UploadToken is null, please check the init config or networking");else{var p=s(i.qiniuRegion),f=n.split("//")[1];a&&a.key&&(f=a.key);var d={token:i.qiniuUploadToken};i.qiniuShouldUseQiniuFileName||(d["key"]=f),c&&c();var k=wx.uploadFile({url:p,filePath:n,name:"file",formData:d,success:function(n){var a=n.data;try{var u=JSON.parse(a),r=i.qiniuImageURLPrefix+"/"+u.key;u.fileUrl=r,u.imageURL=r,t&&t(u)}catch(s){e.log(s),e.log("parse JSON failed, origin String is: "+a),o&&o(s)}},fail:function(n){e.error(n),o&&o(n)},complete:function(n){l&&l(n)}});k.onProgressUpdate(function(n){u&&u(n)}),r&&r(function(){k.abort()})}}function r(n){wx.request({url:i.qiniuUploadTokenURL,success:function(t){var o=t.data.uptoken;o&&o.length>0?(i.qiniuUploadToken=o,n&&n()):e.error("qiniuUploader cannot get your token, please check the uptokenURL or server")},fail:function(n){e.error("qiniu UploadToken is null, please check the init config or networking: "+n)}})}function s(n){var i=null;switch(n){case"ECN":i="http://up.qiniup.com";break;case"NCN":i="https://up-z1.qiniup.com";break;case"SCN":i="https://up-z2.qiniup.com";break;case"NA":i="https://up-na0.qiniup.com";break;case"ASG":i="https://up-as0.qiniup.com";break;default:e.error("please make the region is with one of [ECN, SCN, NCN, NA, ASG]")}return i}n.exports={init:t,upload:a}}()}).call(this,i("5a52")["default"])},f132:function(n,e,i){var t=i("0b34");"string"===typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);var o=i("4f06").default;o("3050660f",t,!0,{sourceMap:!1,shadowMode:!1})},f84c:function(n,e,i){"use strict";var t=function(){var n=this,e=n.$createElement,i=n._self._c||e;return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"tips"},[n._v("上传本人真实视频")]),i("v-uni-view",{staticClass:"cover-wrap",on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.previewVideo.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"cover-image",attrs:{src:n.coverImage,mode:"aspectFill"}}),i("v-uni-image",{directives:[{name:"show",rawName:"v-show",value:""!=n.form.file,expression:"form.file != ''"}],staticClass:"player-icon",attrs:{src:"/static/img/player_icon.png",mode:""}})],1),i("v-uni-view",{staticClass:"progress-box"},[n.progress>0?i("v-uni-progress",{staticClass:"progress",attrs:{percent:n.progress,activeColor:"#FF76A8"}}):n._e(),n.progress>0?i("v-uni-text",[n._v(n._s(n.progress_text))]):n._e()],1),i("v-uni-view",{staticClass:"btn-wrap"},[i("v-uni-button",{staticClass:"album",attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.upload("album")}}},[n._v("本地上传")]),i("v-uni-button",{staticClass:"camera",attrs:{type:"default"},on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.upload("camera")}}},[n._v("拍摄上传")])],1)],1)},o=[];i.d(e,"a",function(){return t}),i.d(e,"b",function(){return o})}}]);