(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-live-live_private"],{"2c19":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"status-bar",style:{height:t.statusBarHeight+"px"}}),i("v-uni-view",{staticClass:"header-wrap"},[i("v-uni-view",{staticClass:"goback",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goback.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"goback-icon",attrs:{src:"/static/img/back.png",mode:""}})],1),i("v-uni-view",{staticClass:"title"},[i("v-uni-text",{staticClass:"title-text"},[t._v(t._s(t.room.roomInfo))])],1),i("v-uni-view",{staticClass:"member-wrap"},[i("v-uni-view",{staticClass:"member-list",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openInviteList.apply(void 0,arguments)}}},t._l(t.inviteList,function(t,e){return i("v-uni-image",{key:e,staticClass:"member-avatar",attrs:{src:t.avatar,mode:"aspectFill"}})}),1),i("v-uni-view",{staticClass:"more",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openInviteList.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"more-text"},[t._v("更多")])],1)],1)],1),i("v-uni-view",{staticClass:"live-wrap"},[i("upusher",{ref:"upusher",staticClass:"upusher",style:{top:t.upusherTop+"rpx"}}),i("uplay",{ref:"uplay1",staticClass:"uplay1",style:{top:t.uplayTop1+"rpx"}}),i("uplay",{ref:"uplay2",staticClass:"uplay2"}),i("v-uni-view",{staticClass:"live-mask"},[i("v-uni-view",{staticClass:"anchor",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openGift("anchor")}}},[t.anchor.userID?i("v-uni-view",{staticClass:"live-user-wrap"},[i("v-uni-view",{staticClass:"live-user-info"},[i("v-uni-image",{staticClass:"live-user-avatar",attrs:{src:t.anchor.userAvatar,mode:"aspectFill"}}),i("v-uni-text",{staticClass:"live-user-name"},[t._v(t._s(t.anchor.userName))])],1),t.anchor_addFriend?i("v-uni-view",{staticClass:"live-addFriend-btn"},[i("v-uni-text",{staticClass:"live-addFriend-btn-text"},[t._v("加好友")])],1):t._e()],1):i("v-uni-view",{staticClass:"anchor-player player-poster"},[i("v-uni-image",{staticClass:"player-poster-img",attrs:{src:"/static/img/shafa.png",mode:""}})],1)],1),i("v-uni-view",{staticClass:"guest1",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openGift("guest1")}}},[t.guest1.userID?i("v-uni-view",{staticClass:"live-user-wrap"},[i("v-uni-view",{staticClass:"live-user-info"},[i("v-uni-image",{staticClass:"live-user-avatar",attrs:{src:t.guest1.userAvatar,mode:"aspectFill"}}),i("v-uni-text",{staticClass:"live-user-name"},[t._v(t._s(t.guest1.userName))])],1),t.guest1_addFriend?i("v-uni-view",{staticClass:"live-addFriend-btn"},[i("v-uni-text",{staticClass:"live-addFriend-btn-text"},[t._v("加好友")])],1):t._e()],1):i("v-uni-view",{staticClass:"guest1-player player-poster"},[i("v-uni-image",{staticClass:"player-poster-img",attrs:{src:"/static/img/shafa.png",mode:""}})],1)],1),i("v-uni-view",{staticClass:"guest2",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openGift("guest2")}}},[t.guest2.userID?i("v-uni-view",{staticClass:"live-user-wrap"},[i("v-uni-view",{staticClass:"live-user-info"},[i("v-uni-image",{staticClass:"live-user-avatar",attrs:{src:t.guest2.userAvatar,mode:"aspectFill"}}),i("v-uni-text",{staticClass:"live-user-name"},[t._v(t._s(t.guest2.userName))])],1),t.guest2_addFriend?i("v-uni-view",{staticClass:"live-addFriend-btn"},[i("v-uni-text",{staticClass:"live-addFriend-btn-text"},[t._v("加好友")])],1):t._e()],1):i("v-uni-view",{staticClass:"guest2-player player-poster"},[i("v-uni-image",{staticClass:"player-poster-img",attrs:{src:"/static/img/shafa.png",mode:""}})],1)],1)],1)],1),i("v-uni-view",{staticClass:"control-wrap"},[i("v-uni-view",{staticClass:"control-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goback.apply(void 0,arguments)}}},[""!=t.timeText?i("v-uni-text",{staticClass:"time"},[t._v(t._s(t.timeText))]):t._e(),i("v-uni-image",{staticClass:"control-icon",attrs:{src:"/static/img/hangup.png",mode:""}}),i("v-uni-text",{staticClass:"control-text"},[t._v("退出")])],1)],1),i("v-uni-view",{staticClass:"footer-wrap"},[i("v-uni-view",{staticClass:"input-wrap"}),i("v-uni-view",{staticClass:"menu-wrap"},["anchor"==t.role?i("v-uni-view",{staticClass:"menu-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openApplicationList.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"menu-icon",attrs:{src:"/static/img/application_icon.png",mode:""}}),t.applicationCount>0?i("v-uni-text",{staticClass:"menu-count"},[t._v(t._s(t.applicationCount))]):t._e()],1):t._e(),"audience"==t.role?i("v-uni-view",{staticClass:"menu-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openGift("guest2")}}},[i("v-uni-image",{staticClass:"menu-icon",attrs:{src:"/static/img/gift_icon.png",mode:""}})],1):t._e()],1)],1),t.showApplicationList?i("v-uni-view",{staticClass:"application-wrap",style:{width:t.screenWidth+"px",height:t.screenHeight+"px"}},[i("v-uni-view",{staticClass:"application-title"},[i("v-uni-text",{staticClass:"application-title-text"},[t._v("申请列表")])],1),i("v-uni-view",{staticClass:"application-list"},[i("v-uni-scroll-view",{staticClass:"application-scroll",attrs:{"scroll-y":!0,"show-scrollbar":!1}},t._l(t.applicationList,function(e,a){return i("v-uni-view",{key:a,staticClass:"user-item"},[i("v-uni-image",{staticClass:"user-avatar",attrs:{src:e.avatar,mode:"aspectFill"}}),i("v-uni-view",{staticClass:"user-info"},[i("v-uni-view",{staticClass:"name-wrap"},[i("v-uni-text",{staticClass:"user-name"},[t._v(t._s(e.name))])],1),i("v-uni-view",{class:["sex-wrap","sex"+e.sex]},[i("v-uni-image",{staticClass:"sex-icon",attrs:{src:"/static/img/sex"+e.sex+".png",mode:""}}),i("v-uni-text",{staticClass:"age"},[t._v(t._s(e.age))])],1)],1),i("v-uni-view",{staticClass:"handle-wrap"},[i("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handle(e,a)}}},[t._v(t._s(e.isInroom?"踢出":"同意"))])],1)],1)}),1)],1),i("v-uni-view",{staticClass:"close-wrap",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openApplicationList.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"close-icon",attrs:{src:"/static/img/close_icon.png",mode:""}})],1)],1):t._e(),t.showInviteList?i("v-uni-view",{staticClass:"application-wrap",style:{width:t.screenWidth+"px",height:t.screenHeight+"px"}},[i("v-uni-view",{staticClass:"application-title"},[i("v-uni-text",{staticClass:"application-title-text"},[t._v("邀请列表")])],1),i("v-uni-view",{staticClass:"application-list"},[i("v-uni-scroll-view",{staticClass:"application-scroll",attrs:{"scroll-y":!0,"show-scrollbar":!1}},t._l(t.inviteList,function(e,a){return i("v-uni-view",{key:a,staticClass:"user-item"},[i("v-uni-image",{staticClass:"user-avatar",attrs:{src:e.avatar,mode:"aspectFill"}}),i("v-uni-view",{staticClass:"user-info"},[i("v-uni-view",{staticClass:"name-wrap"},[i("v-uni-text",{staticClass:"user-name"},[t._v(t._s(e.name))])],1),i("v-uni-view",{class:["sex-wrap","sex"+e.sex]},[i("v-uni-image",{staticClass:"sex-icon",attrs:{src:"/static/img/sex"+e.sex+".png",mode:""}}),i("v-uni-text",{staticClass:"age"},[t._v(t._s(e.age))])],1)],1),i("v-uni-view",{staticClass:"handle-wrap"},[i("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.invite(e,a)}}},[t._v("邀请")])],1)],1)}),1)],1),i("v-uni-view",{staticClass:"close-wrap",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openInviteList.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"close-icon",attrs:{src:"/static/img/close_icon.png",mode:""}})],1)],1):t._e(),t.isGift?i("v-uni-view",{staticClass:"gift-popup"},[i("v-uni-view",{staticClass:"gift-popup-user"},[i("v-uni-view",{staticClass:"gift-popup-user-avatar"},[i("v-uni-image",{staticClass:"gift-popup-user-avatar-img",attrs:{src:t.giftData.from.avatar,mode:"aspectFill"}})],1),i("v-uni-view",{staticClass:"gift-popup-user-info"},[i("v-uni-view",{staticClass:"gift-popup-user-info-item"},[i("v-uni-text",{staticClass:"gift-popup-user-name"},[t._v(t._s(t.giftData.from.name))])],1),i("v-uni-view",{staticClass:"gift-popup-user-info-item"},[i("v-uni-text",{staticClass:"gift-popup-user-info-text"},[t._v("送")]),i("v-uni-text",{staticClass:"gift-popup-user-name"},[t._v(t._s(t.giftData.to.name))])],1)],1)],1),i("v-uni-view",{staticClass:"gift-popup-gift"},[i("v-uni-text",{staticClass:"gift-popup-gift-name"},[t._v(t._s(t.giftData.gift.name))]),i("v-uni-image",{staticClass:"gift-popup-gift-img",attrs:{src:t.giftData.gift.img,mode:""}}),i("v-uni-view",{staticClass:"gift-popup-gift-count"},[i("v-uni-text",{staticClass:"gift-popup-gift-count-info"},[t._v("x")]),i("v-uni-text",{staticClass:"gift-popup-gift-count-text"},[t._v(t._s(t.giftData.gift.count))])],1)],1)],1):t._e()],1)},s=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s})},"5acd":function(t,e,i){"use strict";(function(t){var a=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(i("f499")),o=a(i("1b2e")),n=i("7386"),r={data:function(){return{liveInfo:{},myInfo:{},role:"audience",room:{roomID:"",roomInfo:"",mixedPlayURL:"",isCreator:!1,pushers:[],isDestory:!1,hasJoinAnchor:!1,roomStatusCode:0},anchor:{},guest1:{},guest2:{},anchor_addFriend:!1,guest1_addFriend:!1,guest2_addFriend:!1,screenWidth:0,screenHeight:0,statusBarHeight:0,applicationList:[],applicationCount:0,showApplicationList:!1,inviteList:[],showInviteList:!1,isGift:!1,giftData:{from:{id:"",name:"",avatar:""},to:{id:"",name:"",avatar:""},gift:{name:"",img:"",count:1}},time:0,timeText:"",minute:99,rechargeflag:!0}},onLoad:function(e){var i=this;try{var a=uni.getStorageSync("user_info");a&&(this.myInfo=a);var s=uni.getSystemInfoSync();s&&(this.screenWidth=s.screenWidth+1,this.screenHeight=s.screenHeight+1,this.statusBarHeight=s.statusBarHeight)}catch(o){t.log(o)}this.liveInfo=JSON.parse(decodeURIComponent(e.live)),this.room.roomID=this.liveInfo.room.id,this.room.roomInfo=this.liveInfo.room.name?this.liveInfo.room.name:"",this.role=this.liveInfo.character,this.minute=this.liveInfo.minute?this.liveInfo.minute:this.minute,"anchor"==this.role&&(this.upusherTop=0,this.uplayTop1=375),"audience"==this.role&&(this.upusherTop=375,this.uplayTop1=0,1==this.myInfo.sex&&this.timer(0)),uni.$on("live_private-page",function(e){if(t.log("live_private-page",e),"ApplicationJoin"==e.type){i.applicationCount++;for(var a=JSON.parse(e.data.payload.extension),s=!1,o=0;o<i.applicationList.length;o++)a.id==i.applicationList[o].id&&(s=!0);s||i.applicationList.push({id:a.id,name:a.name,avatar:a.avatar,sex:a.sex,age:a.age,isInroom:!1})}if("Joined"==e.type){for(var r=!1,c=JSON.parse(e.data.payload.extension),u=0;u<i.applicationList.length;u++)if(c.id==i.applicationList[u].id){r=!0;var l=i.applicationList[u];l.isInroom=!0,i.$set(i.applicationList,u,l)}r||"anchor"==i.role&&i.applicationList.push({id:c.id,name:c.name,avatar:c.avatar,sex:c.sex,age:c.age,isInroom:!0})}if("KickedOut"==e.type){var d=JSON.parse(e.data.payload.extension);d.id!=i.myInfo.id&&(i.$refs.upusher.stopPusher(function(e){t.log("stopPusher",e)}),i.$refs.uplay1.stopPlay(function(e){t.log("uplay1",e)}),i.$refs.uplay2.stopPlay(function(e){t.log("uplay2",e)}),n.exitRoom({success:function(t){uni.navigateBack({delta:-1}),uni.showToast({title:"退出房间",position:"bottom",icon:"none"})},fail:function(e){t.error("退出房间失败:",e),uni.showToast({title:"退出房间",position:"bottom",icon:"none"}),uni.navigateBack({delta:-1})}}))}if("gift"==e.type){var f=JSON.parse(e.data.payload.extension);e.data.minute&&(i.minute=e.data.minute),i.giftData={from:{id:f.fromId,name:f.fromName,avatar:f.fromAvatar},to:{id:f.toId,name:f.toName,avatar:f.toAvatar},gift:{name:f.giftName,img:f.url,count:f.count}},i.isGift=!0,setTimeout(function(){i.isGift=!1},5e3),f.toId==i.anchor.userID&&i.isFriendCheck("anchor"),f.toId==i.guest1.userID&&i.isFriendCheck("guest1"),f.toId==i.guest2.userID&&i.isFriendCheck("guest2")}"add-friend"==e.type&&i.addFriend(e.data)})},onReady:function(){var e=this;uni.setKeepScreenOn({keepScreenOn:!0}),this.login(),n.setListener({onAnchorEnter:function(i){if(t.log("onAnchorEnter",(0,s.default)(i.pushers)),t.log("this.room.pushers",(0,s.default)(e.room.pushers)),"anchor"==e.role){for(var a=0;a<i.pushers.length;a++)e.room.pushers.push(i.pushers[a]);e.anchor=e.room.pushers[0],2==e.room.pushers.length&&(e.guest1=e.room.pushers[1],e.$refs.uplay1.startPlay(e.room.pushers[1].accelerateURL,1,function(e){t.log("startPlay",e)}),e.isFriendCheck("guest1")),3==e.room.pushers.length&&(e.guest1.userID?(e.guest2=e.room.pushers[2],e.$refs.uplay2.startPlay(e.room.pushers[2].accelerateURL,1,function(e){t.log("startPlay",e)}),e.isFriendCheck("guest2")):e.guest2.userID&&(e.guest1=e.room.pushers[2],e.$refs.uplay1.startPlay(e.room.pushers[2].accelerateURL,1,function(e){t.log("startPlay",e)}),e.isFriendCheck("guest1")))}if("audience"==e.role){if(e.room.hasJoinAnchor){for(var o=0;o<i.pushers.length;o++)e.room.pushers.push(i.pushers[o]);e.anchor=e.room.pushers[0],e.guest1=e.room.pushers[1],e.guest2=e.room.pushers[2],e.$refs.uplay2.startPlay(e.room.pushers[2].accelerateURL,1,function(e){t.log("startPlay",e)})}else e.room.pushers=i.pushers,e.anchor=e.room.pushers[0],e.guest1=e.room.pushers[1],e.$refs.uplay1.startPlay(e.room.pushers[0].accelerateURL,1,function(e){t.log("startPlay",e)}),3==e.room.pushers.length&&(e.guest1=e.room.pushers[2],e.guest2=e.room.pushers[1],e.$refs.uplay2.startPlay(e.room.pushers[1].accelerateURL,1,function(e){t.log("startPlay",e)}));e.isFriendCheck("anchor"),e.isFriendCheck("guest1"),e.isFriendCheck("guest2")}},onAnchorExit:function(i){t.log("onAnchorExit--------------------------------------",(0,s.default)(i.pushers)),t.log("this.room.pushers====================================",(0,s.default)(e.room.pushers));for(var a=0;a<i.pushers.length;a++){for(var o=0;o<e.applicationList.length;o++)i.pushers[a].userID==e.applicationList[o].id&&e.applicationList.splice(o,1);for(var n=0;n<e.room.pushers.length;n++)i.pushers[a].userID==e.room.pushers[n].userID&&(3==e.room.pushers.length&&"anchor"==e.role&&(1==n&&(e.guest1.userID="",e.$refs.uplay1.stopPlay(function(e){t.log("uplay1",e)})),2==n&&(e.guest2.userID="",e.$refs.uplay2.stopPlay(function(e){t.log("uplay2",e)}))),2==e.room.pushers.length&&"anchor"==e.role&&(e.guest1.userID="",e.$refs.uplay1.stopPlay(function(e){t.log("uplay1",e)}),e.guest2.userID="",e.$refs.uplay2.stopPlay(function(e){t.log("uplay2",e)})),"audience"==e.role&&(e.guest2.userID="",e.$refs.uplay2.stopPlay(function(e){t.log("uplay2",e)})),e.room.pushers.splice(n,1));uni.showToast({title:i.pushers[a].userName+"离开房间",position:"bottom",icon:"none"})}}})},onShow:function(){t.log("live_private-page onShow");var e=getApp().globalData.invite_list;if(e&&e.length>0)for(var i=0;i<e.length;i++)e[i].isInvite=!1,this.inviteList.push(e[i])},onHide:function(){t.log("live_private-page onHide")},onUnload:function(){uni.$off("live_private-page")},onBackPress:function(t){return"navigateBack"!==t.from&&(this.goback(),!0)},methods:{timer:function(e){var i=this,a=e,o=0,n=0,r=0,c=0;r=a%60,c=Math.floor(a/60),n=c%60,o=Math.floor(c/60),this.timeText=o<10?"0"+o+":":o+":",this.timeText+=n<10?"0"+n+":":n+":",this.timeText+=r<10?"0"+r:r+"",n>=this.minute-2&&this.rechargeflag&&(this.rechargeflag=!1,uni.showModal({title:"",content:"您剩余视频通话已不足2分钟，请及时充值",success:function(t){if(t.confirm){var e={id:i.myInfo.id,name:i.myInfo.name,token:i.myInfo.token,rose:0};uni.navigateTo({url:"../my/rose?userinfo="+(0,s.default)(e)})}}})),n>this.minute-1&&(uni.showToast({title:"您的玫瑰已用完，结束视频通话",position:"bottom",icon:"none"}),this.$refs.upusher.stopPusher(function(e){t.log("stopPusher",e)}),this.$refs.uplay1.stopPlay(function(e){t.log("uplay1",e)}),this.$refs.uplay2.stopPlay(function(e){t.log("uplay2",e)}),this.exitRoom()),a++,setTimeout(function(){i.time=n+1,i.timer(a)},1e3)},goback:function(){var e=this;uni.showModal({title:"退出",content:"确认要退出直播间？",success:function(i){if(i.confirm){try{e.$refs.upusher.stopPusher(function(e){t.log("stopPusher",e)}),e.$refs.uplay1.stopPlay(function(e){t.log("uplay1",e)}),e.$refs.uplay2.stopPlay(function(e){t.log("uplay2",e)})}catch(a){t.error(a)}e.exitRoom()}}})},login:function(){var e=this;n.login({data:{sdkAppID:o.default.tencentSdkAppID,userID:this.myInfo.id,userName:this.myInfo.name,userAvatar:this.myInfo.avatar,userSig:this.myInfo.UserSig},success:function(i){t.log("RoomService 登录成功:",i),"anchor"==e.role?e.createRoom():e.addAudience()},fail:function(e){t.error("RoomService 登录失败:",e)}})},createRoom:function(){var e=this;n.createRoom({data:{roomID:this.room.roomID+"",roomInfo:this.room.roomInfo},success:function(i){t.log("创建房间成功:",i),e.room.isCreator=!0,e.getPushURL()},fail:function(e){t.error("创建房间失败:",e)}})},getPushURL:function(){var e=this;n.getPushURL({success:function(i){t.log("获取推流地址成功: ",i),e.pushURL=i.pushURL,e.startPusher()},fail:function(e){t.log("获取推流地址失败: ",e)}})},startPusher:function(){var e=this;t.log("startPusher: 11",this.$refs.upusher,this.pushURL);try{this.$refs.upusher.startPusher(this.pushURL,function(i){t.log("startPusher",i),0==i.code&&e.addAnchor()})}catch(i){t.error(i)}},addAnchor:function(){var e=this;n.joinAnchor({data:{roomID:this.room.roomID,pushURL:this.pushURL,type:"private"},success:function(i){t.log("上麦成功",i),e.room.hasJoinAnchor=!0},fail:function(e){t.error("上麦失败:",e)}})},addAudience:function(){var e=this;n.enterRoom({data:{roomID:this.room.roomID},success:function(i){t.log("观众加入房间成功:",i),e.room.pushers=i.data.pushers,e.anchor=e.room.pushers[0],e.anchor.isFriend=0,e.room.pushers[1]&&(e.guest1=e.room.pushers[1],e.guest1.isFriend=0),e.room.pushers[2]&&(e.guest2=e.room.pushers[2],e.guest2.isFriend=0),e.isFriendCheck("anchor"),e.isFriendCheck("guest1"),e.isFriendCheck("guest2"),e.getPushURL()},fail:function(e){t.error("观众加入房间失败:",e)}})},exitRoom:function(){var e=this;n.exitRoom({success:function(t){"anchor"==e.role?o.default.api.ajaxData({method:"V1.LoveClose",uid:e.myInfo.id,token:e.myInfo.token,rid:e.room.roomID},function(t){t.status&&uni.navigateBack({delta:-1})}):o.default.api.ajaxData({method:"V1.LoveExit",uid:e.myInfo.id,token:e.myInfo.token,rid:e.room.roomID,qid:"0"},function(t){t.status&&uni.navigateBack({delta:-1})}),uni.showToast({title:"退出房间",position:"bottom",icon:"none"})},fail:function(e){t.error("退出房间失败:",e),uni.showToast({title:"退出房间",position:"bottom",icon:"none"}),uni.navigateBack({delta:-1})}})},openInviteList:function(){this.showInviteList=!this.showInviteList},openApplicationList:function(){this.applicationCount=0,this.showApplicationList=!this.showApplicationList},handle:function(t,e){var i=this;if(t.isInroom)o.default.api.ajaxData({method:"V1.LoveExit",uid:this.myInfo.id,token:this.myInfo.token,rid:this.room.roomID,qid:t.id},function(a){if(a.status){uni.showToast({title:"操作成功",position:"bottom",icon:"none"}),i.applicationList.splice(e,1);var o={roomid:i.room.roomID,id:i.myInfo.id,name:i.myInfo.name,avatar:i.myInfo.avatar,sex:i.myInfo.sex};uni.$emit("main",{type:"sendCustomMessage",data:{type:"KickedOut",to_uid:t.id,custom_ext:(0,s.default)(o)}})}else uni.showToast({title:a.msg,position:"bottom",icon:"none"})});else{if(this.guest1.userID&&this.guest2.userID)return!1;var a=null;1==t.sex&&(a={id:this.guest2.userID?this.guest2.userID:"",name:this.guest2.userName?this.guest2.userName:"",avatar:this.guest2.userAvatar?this.guest2.userAvatar:"",age:this.guest2.age?this.guest2.age:""}),2==t.sex&&(a={id:this.guest1.userID?this.guest1.userID:"",name:this.guest1.userName?this.guest1.userName:"",avatar:this.guest1.userAvatar?this.guest1.userAvatar:"",age:this.guest1.age?this.guest1.age:""});var n={roomid:this.room.roomID,anchor:{id:this.anchor.userID,name:this.anchor.userName,avatar:this.anchor.userAvatar},guest:a};uni.$emit("main",{type:"sendCustomMessage",data:{type:"AgreeJoin",to_uid:t.id,custom_ext:(0,s.default)(n)}}),uni.showToast({title:"已同意",position:"bottom",icon:"none"})}},invite:function(t,e){var i=this.inviteList[e];i.isInvite=!0,this.$set(this.inviteList,e,i);var a=null;1==t.sex&&(a={id:this.guest2.userID?this.guest2.userID:"",name:this.guest2.userName?this.guest2.userName:"",avatar:this.guest2.userAvatar?this.guest2.userAvatar:"",age:this.guest2.age?this.guest2.age:""}),2==t.sex&&(a={id:this.guest1.userID?this.guest1.userID:"",name:this.guest1.userName?this.guest1.userName:"",avatar:this.guest1.userAvatar?this.guest1.userAvatar:"",age:this.guest1.age?this.guest1.age:""});var o={roomid:this.room.roomID,anchor:{id:this.anchor.userID,name:this.anchor.userName,avatar:this.anchor.userAvatar},guest:a,fromId:this.myInfo.id};uni.$emit("main",{type:"sendCustomMessage",data:{type:"LovePrivate",to_uid:t.id,custom_ext:(0,s.default)(o)}}),uni.showToast({title:"邀请已发出，请耐心等待",position:"bottom",icon:"none"})},openGift:function(t){var e=this,i=null,a=0;if("anchor"==t){if(this.room.isCreator)return!1;i={id:this.anchor.userID,name:this.anchor.userName,avatar:this.anchor.userAvatar,isFriend:this.anchor.isFriend}}if("guest1"==t){if(!this.guest1.userID)return!1;this.myInfo.id!=this.guest1.userID?i={id:this.guest1.userID,name:this.guest1.userName,avatar:this.guest1.userAvatar,isFriend:this.guest1.isFriend}:uni.showToast({title:"不能送自己礼物",position:"bottom",icon:"none"})}if("guest2"==t){if(!this.guest2.userID)return uni.showToast({title:"嘉宾未上麦",position:"bottom",icon:"none"}),!1;this.myInfo.id!=this.guest2.userID?i={id:this.guest2.userID,name:this.guest2.userName,avatar:this.guest2.userAvatar,isFriend:this.guest2.isFriend}:uni.showToast({title:"不能送自己礼物",position:"bottom",icon:"none"})}if(i){this.anchor.userID;this.myInfo.id==this.anchor.userID&&"0",1==this.myInfo.sex&&(a=this.time),o.default.api.ajaxData({method:"V1.Gift",uid:this.myInfo.id,token:this.myInfo.token},function(t){if(t.status){var s=uni.getSubNVueById("gift");s.show("slide-in-bottom",300,function(){uni.$emit("gift",{toInfo:i,userInfo:e.myInfo,list:t.data.list,rid:e.anchor.userID,minute:a,groupID:"Y"+e.room.roomID})})}})}},isFriendCheck:function(t){var e=this,i="";return"anchor"==t&&(i=this.anchor.userID),"guest1"==t&&(i=this.guest1.userID?this.guest1.userID:""),"guest2"==t&&(i=this.guest2.userID?this.guest2.userID:""),""!=i&&(i!=this.myInfo.id&&void o.default.api.ajaxData({method:"V1.FriendCheck",uid:this.myInfo.id,token:this.myInfo.token,touid:i},function(i){i.status&&("CheckResult_Type_AWithB"==i.data[0].InfoItem[0].Relation||"CheckResult_Type_BothWay"==i.data[0].InfoItem[0].Relation?("anchor"==t&&(e.anchor_addFriend=!1,e.anchor.isFriend=1),"guest1"==t&&(e.guest1_addFriend=!1,e.guest1.isFriend=1),"guest2"==t&&(e.guest2_addFriend=!1,e.guest2.isFriend=1)):("anchor"==t&&(e.anchor_addFriend=!0,e.anchor.isFriend=0),"guest1"==t&&(e.guest1_addFriend=!0,e.guest1.isFriend=0),"guest2"==t&&(e.guest2_addFriend=!0,e.guest2.isFriend=0)))}))}},filters:{getIncome:function(t){}}};e.default=r}).call(this,i("5a52")["default"])},"8cb1":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".content[data-v-8b51a81c]{width:%?751?%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex:1;flex:1;background-image:-webkit-linear-gradient(bottom left,#2e185b,#4e3d36);background-image:linear-gradient(to top right,#2e185b,#4e3d36);position:relative}.header-wrap[data-v-8b51a81c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:%?100?%}.title[data-v-8b51a81c]{width:%?200?%}.title-text[data-v-8b51a81c]{font-size:%?30?%;color:#fff;lines:1;text-overflow:ellipsis}.goback[data-v-8b51a81c]{-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?120?%;height:%?100?%}.goback-icon[data-v-8b51a81c]{width:%?60?%;height:%?60?%}.member-wrap[data-v-8b51a81c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?420?%}.member-list[data-v-8b51a81c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;width:%?320?%}.member-avatar[data-v-8b51a81c]{width:%?60?%;height:%?60?%;margin:0 %?10?% 0 0;border-radius:%?60?%;border-width:%?1?%;border-style:solid;border-color:#fff}.more[data-v-8b51a81c]{-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?60?%;height:%?60?%;margin-left:%?20?%;background-color:rgba(0,0,0,.6);border-radius:%?60?%}.more-text[data-v-8b51a81c]{font-size:%?20?%;color:#fff}.live-wrap[data-v-8b51a81c]{width:%?750?%;height:%?750?%;background-color:#000;position:relative}.upusher[data-v-8b51a81c]{width:%?375?%;height:%?375?%;position:absolute;left:%?375?%}.uplay1[data-v-8b51a81c]{width:%?375?%;height:%?375?%;position:absolute;left:%?375?%;top:%?375?%}.uplay2[data-v-8b51a81c]{width:%?375?%;height:%?750?%;position:absolute;left:0;top:0}.live[data-v-8b51a81c]{width:%?750?%;height:%?750?%}.live-mask[data-v-8b51a81c]{position:absolute;left:0;top:0}.anchor[data-v-8b51a81c]{width:%?376?%;height:%?376?%;position:absolute;left:%?375?%;top:0}.guest1[data-v-8b51a81c]{width:%?376?%;height:%?376?%;position:absolute;left:%?375?%;top:%?375?%}.guest2[data-v-8b51a81c]{width:%?375?%;height:%?750?%;position:absolute;left:0;top:0}.live-user-wrap[data-v-8b51a81c]{width:%?375?%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background-image:-webkit-linear-gradient(top,transparent,rgba(0,0,0,.6));background-image:linear-gradient(180deg,transparent,rgba(0,0,0,.6));padding:%?20?% %?10?%;position:absolute;left:0;bottom:0}.live-user-info[data-v-8b51a81c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-flex:1;-webkit-flex:1;flex:1}.live-addFriend-btn[data-v-8b51a81c]{-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?100?%;height:%?40?%;margin-left:%?10?%;background-color:#ff76a8;border-radius:%?40?%}.live-addFriend-btn-text[data-v-8b51a81c]{font-size:%?20?%;color:#fff}.live-user-avatar[data-v-8b51a81c]{width:%?80?%;height:%?80?%;border-radius:%?80?%;margin-right:%?10?%}.live-user-name[data-v-8b51a81c]{font-size:%?24?%;color:#fff}.anchor-player[data-v-8b51a81c]{background-color:#2f185b}.guest1-player[data-v-8b51a81c]{background-color:#3f185b}.guest2-player[data-v-8b51a81c]{background-color:#290f48}.player-poster[data-v-8b51a81c]{-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;position:absolute;left:0;right:0;top:0;bottom:0}.player-poster-img[data-v-8b51a81c]{width:%?100?%;height:%?100?%}.footer-wrap[data-v-8b51a81c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?750?%;height:%?100?%;padding:0 %?20?%;position:fixed;left:0;bottom:0}.input-wrap[data-v-8b51a81c]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.menu-wrap[data-v-8b51a81c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.menu-item[data-v-8b51a81c]{-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?80?%;height:%?80?%;background-color:rgba(0,0,0,.5);border-radius:%?80?%;margin-left:%?5?%;margin-right:%?5?%;position:relative}.menu-icon[data-v-8b51a81c]{width:%?40?%;height:%?40?%}.menu-count[data-v-8b51a81c]{width:%?20?%;height:%?20?%;text-align:center;line-height:%?20?%;background-color:#ed4574;border-radius:%?20?%;font-size:%?10?%;color:#fff;position:absolute;right:%?10?%;top:%?10?%}.application-wrap[data-v-8b51a81c]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background-color:rgba(0,0,0,.6);position:fixed;left:0;top:0}.application-title[data-v-8b51a81c]{text-align:center;padding:%?20?%}.application-title-text[data-v-8b51a81c]{font-size:%?30?%;color:#fff}.application-list[data-v-8b51a81c]{width:%?600?%;height:%?800?%;padding:%?20?%;background-color:#fff;border-radius:%?20?%}.application-scroll[data-v-8b51a81c]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;height:%?760?%}.user-item[data-v-8b51a81c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?10?%}.user-avatar[data-v-8b51a81c]{width:%?80?%;height:%?80?%;border-radius:%?80?%}.user-info[data-v-8b51a81c]{-webkit-box-flex:1;-webkit-flex:1;flex:1;padding:%?10?%}.user-name[data-v-8b51a81c]{font-size:%?28?%;color:#333;margin-bottom:%?10?%}.sex-wrap[data-v-8b51a81c]{width:%?70?%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;line-height:%?24?%;border-radius:%?24?%}.sex-icon[data-v-8b51a81c]{width:%?16?%;height:%?16?%}.sex1[data-v-8b51a81c]{background-color:#83d7ff}.sex2[data-v-8b51a81c]{background-color:#fe9ab7}.age[data-v-8b51a81c]{font-size:%?16?%;color:#fff;margin-left:%?5?%}.close-wrap[data-v-8b51a81c]{padding:%?30?%}.close-icon[data-v-8b51a81c]{width:%?80?%;height:%?80?%}.control-wrap[data-v-8b51a81c]{-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-justify-content:space-around;justify-content:space-around;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end}.control-item[data-v-8b51a81c]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-bottom:%?100?%}.time[data-v-8b51a81c]{font-size:%?24?%;color:#fff;margin-bottom:%?10?%}.control-icon[data-v-8b51a81c]{width:%?80?%;height:%?80?%}.control-text[data-v-8b51a81c]{font-size:%?24?%;color:#fff;margin-top:%?10?%}\n\n/* 礼物 */.gift-popup[data-v-8b51a81c]{width:%?560?%;height:%?100?%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background-image:-webkit-linear-gradient(left,rgba(0,0,0,.8),rgba(0,0,0,.2));background-image:linear-gradient(90deg,rgba(0,0,0,.8),rgba(0,0,0,.2));border-radius:%?100?%;position:absolute;left:%?10?%;bottom:%?400?%;z-index:999}.gift-popup-user[data-v-8b51a81c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.gift-popup-user-avatar[data-v-8b51a81c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?100?%;height:%?100?%;border-radius:%?100?%}.gift-popup-user-avatar-img[data-v-8b51a81c]{width:%?90?%;height:%?90?%;border-radius:%?90?%}.gift-popup-user-info[data-v-8b51a81c]{width:%?200?%;text-overflow:ellipsis;overflow:hidden}.gift-popup-user-name[data-v-8b51a81c]{font-size:%?24?%;color:#fff}.gift-popup-user-info-text[data-v-8b51a81c]{font-size:%?24?%;color:#ff76a8;margin-right:%?5?%}.gift-popup-gift[data-v-8b51a81c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.gift-popup-gift-name[data-v-8b51a81c]{font-size:%?24?%;color:#ff76a8}.gift-popup-gift-img[data-v-8b51a81c]{width:%?80?%;height:%?80?%}.gift-popup-gift-count[data-v-8b51a81c]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.gift-popup-gift-count-info[data-v-8b51a81c]{font-size:%?24?%;color:#ed4574;margin-right:%?10?%;font-weight:700}.gift-popup-gift-count-text[data-v-8b51a81c]{font-size:%?48?%;color:#ed4574}",""])},"9f7b":function(t,e,i){var a=i("8cb1");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("4f06").default;s("da36a592",a,!0,{sourceMap:!1,shadowMode:!1})},c56d:function(t,e,i){"use strict";i.r(e);var a=i("5acd"),s=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);e["default"]=s.a},ca6e:function(t,e,i){"use strict";i.r(e);var a=i("2c19"),s=i("c56d");for(var o in s)"default"!==o&&function(t){i.d(e,t,function(){return s[t]})}(o);i("f004");var n=i("f0c5"),r=Object(n["a"])(s["default"],a["a"],a["b"],!1,null,"8b51a81c",null);e["default"]=r.exports},f004:function(t,e,i){"use strict";var a=i("9f7b"),s=i.n(a);s.a}}]);